
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Posted in 2021 &#8212; Urban Grammar AI  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
     
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Posted in 2021"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    


    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><center>
  <a class="navbar-brand" href="../index.html">
    <img src="../_static/logo.svg" alt="logo">
  </a>
  <p style="font-size:1.3em">Urban Grammar AI</p>
  <p style="font-size:1em">research project</p>
</center>


<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..."
    aria-label="Search the docs ..." autocomplete="off">
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
    



    <ul class="nav bd-sidenav">
      
      <li class="nav-item ">
        <a class="nav-link" href="../overview.html">Project overview</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.xyz/blog/archive">Updates</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.xyz/talks/">Public talks</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.xyz/data_processing/index">WP1 - Data processing</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.xyz/spatial_signatures/index">WP2 - Spatial Signatures</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.xyz/signature_ai/index">WP3 - Signature AI</a>
      </li>
      
    </ul>

</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
<div class="section">
  <h1>
     Posted in  2021 
  </h1>
   

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post18_turing20.html"
        >British Spatial Signatures at Towards urban analytics 2.0</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          17 December 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>On Tuesday, November 30th, Martin gave a lighting talk on the Spatial Signatures of Great Britain at the Alan Turing Insititute event <a class="reference external" href="https://www.turing.ac.uk/events/towards-urban-analytics-20">Towards urban analytics 2.0</a> that was in person in Leeds, UK. The talk introduced the classification of Great Britain that is now available in the form of <a class="reference external" href="http://urbangrammarai.xyz/great-britain/#">an interactive map</a> and for download either from the <a class="reference external" href="https://data.cdrc.ac.uk/dataset/spatial-signatures-great-britain">Consumer Data Research Centreâ€™s open data portal</a> or the archived version from <a class="reference external" href="https://doi.org/10.6084/m9.figshare.16691575.v1">figshare</a>. While there was no space for a Q&amp;A directly after the talk, it has raised an interest leading to several great informal discussions afterwards.</p>
<p>You can watch the talk at:</p>
<p>The slides from the talk are <a class="reference external" href="https://urbangrammarai.xyz/talks/202111_ati_leeds/index.html">here</a> or <a class="reference external" href="https://urbangrammarai.xyz/talks/202111_ati_leeds/index.pdf">here is the <code class="docutils literal notranslate"><span class="pre">PDF</span></code> file</a>.</p>
</div>

    <p class="ablog-post-expand"><a href="post18_turing20.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post20_third_advisory_board.html"
        >Third Advisory Board</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          10 December 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>On December 9th. 2021, we held the meeting of the Advisory Board for the project. Still being limited by the global pandemic, we had a frutiful Zoom call filled with an exciting discussion on the opportunities Spatial Signatures offer.</p>
<p>The session started with an overview of the current progress focusing on the current progress and explanation of the whole process of generating spatial signatures from data acquistion to empirical exploration. We then spent
some time discussed the open infrastruture built around the project resulting in an open data product and maximum transparency of the process behind it. We followed by the focused discussion on dissemination and impact of the classification.</p>
<p>Three hours later, we finished with a lot of ideas and potential research avenues and collaborations to be explored. We hope that the situation permits another Advisory board meeting soon and hopefully, in person.</p>
</div>

    <p class="ablog-post-expand"><a href="post20_third_advisory_board.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post17_casa_talk.html"
        >British Spatial Signatures talk at CASA</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          10 December 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>On Monday November 29th, Dani gave a talk on the Spatial Signatures project at the <a class="reference external" href="https://ucl.ac.uk/barlett/casa">CASA</a> seminars. The talk covered known bits from <a class="reference external" href="https://urbangrammarai.xyz/talks">previous talks</a>, mostly about framing of the problem and the foundational blocks of the Spatial Signatures but, more importantly, presented for the first time our results from the British signatures. The audience was engaging and had many super interesting questions. Thanks!</p>
<p>CASA recorded and published the video on YouTube:</p>
<p>The slides used are <a class="reference external" href="https://urbangrammarai.xyz/talks/202111_casa/index.html">here</a> or, if you prefer it, <a class="reference external" href="https://urbangrammarai.xyz/talks/202111_casa/index.pdf">here is the <code class="docutils literal notranslate"><span class="pre">PDF</span></code> file</a>.</p>
</div>

    <p class="ablog-post-expand"><a href="post17_casa_talk.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post16_turing_talk.html"
        >Urban Grammar in the Turing Catch Up</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          09 December 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>Last month, on November 23rd, Dani gave a quick overview of the Urban Grammar project at the monthly catch up of the Alan Turing Institute. This is an internal call open to all fellows and staff. Dani gave an overview of the project, and covered in a bit more detail the aspects that have been completed already, including the development of a Spatial Signature classification for Great Britain.</p>
<p>There is no video of the talk, but you can check out the slides used <a class="reference external" href="https://urbangrammarai.xyz/talks/202111_ati/">here</a> in the talks page of the project or, if you prefer to download a PDF version, you can do so <a class="reference external" href="https://urbangrammarai.xyz/talks/202111_ati/index.pdf">here</a>.</p>
</div>

    <p class="ablog-post-expand"><a href="post16_turing_talk.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post15_xyzservices.html"
        >xyzservices: a unified source of XYZ tile providers in Python</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          03 August 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p><em>Within the project, we often need to map the results within different contexts ranging from static to interactive maps. We felt that it could be a smoother experience and built <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code>.</em></p>
<p>A Python ecosystem offers numerous tools for the visualisation of data
on a map. A lot of them depend on XYZ tiles, providing a base map layer,
either from OpenStreetMap, satellite or other sources. The issue is that
each package that offers XYZ support manages its own list of supported
providers.</p>
<p>We have built <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code> package to support any Python library making
use of XYZ tiles. Iâ€™ll try to explain the rationale why we did that,
without going into the details of the package. If you want those
details, check its <a class="reference external" href="https://xyzservices.readthedocs.io/en/latest/">documentation</a>.</p>
<p>Let me quickly look at a few popular packages and their approach to tile
management - <code class="docutils literal notranslate"><span class="pre">contextily</span></code>, <code class="docutils literal notranslate"><span class="pre">folium</span></code>, <code class="docutils literal notranslate"><span class="pre">ipyleaflet</span></code> and <code class="docutils literal notranslate"><span class="pre">holoviews</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">contextily</span></code> brings contextual base maps to static <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> plots. It
comes with a dedicated <code class="docutils literal notranslate"><span class="pre">contextily.providers</span></code> module, which contains <a class="reference external" href="https://github.com/geopandas/contextily/blob/v1.1.0/contextily/_providers.py">a
hard-coded list of providers</a> scraped from <a class="reference external" href="http://leaflet-extras.github.io/leaflet-providers/preview/">the list used by leaflet</a>
(as of version 1.1.0).</p>
</div>

    <p class="ablog-post-expand"><a href="post15_xyzservices.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post14_ati.html"
        >Signatures for (all of) GB at Turing Urban Analytics</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          09 July 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>On June 30th, Dani provided an overview of ongoing work to build Spatial Signatures for all
of Great Britain at the Turingâ€™s <a class="reference external" href="https://www.turing.ac.uk/events/urban-analytics-monthly-meet">Urban Analytics monthly meetup</a>.
This was the first public presentation covering our work at a national scale and we are excited at how positively it was
received.</p>
<p>The talk is published now on YouTube:</p>
<p>You can have a look at Martinâ€™s presentation at:</p>
<p>And if you want to check out the slides, you can see the <a class="reference external" href="https://urbangrammarai.github.io/talks/202106_ati/index.html">HTML deck</a> or the <a class="reference external" href="https://urbangrammarai.github.io/talks/202106_ati/index.pdf">PDF version</a>.</p>
<p>We are nearing the point where we can release some of the data products we have been building and feature in this talk so, if you are interested, stay
tuned as we will have more news to share shortly!</p>
</div>

    <p class="ablog-post-expand"><a href="post14_ati.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post13_isuf.html"
        >Form-based Signatures at ISUF 2021</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          05 July 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>On June 30th, Martin presented a classification of Great Britain based on the form
component of Spatial Signatures at the International Seminar on Urban Form 2021, which
was held virtually in Glasgow, Scotland. This was the first time we have presented results covering the
whole GB, albeit using a single component only (function has been temporarily excluded). The work was received positively and spurred
a bit of discussion. Within a few months, the results should be published in the conference proceedings.</p>
<p>You can have a look at Martinâ€™s presentation at:</p>
<p>The slides used are <a class="reference external" href="https://urbangrammarai.xyz/talks/202106_isuf">here</a> or, if you prefer it, <a class="reference external" href="https://urbangrammarai.xyz/talks/202106_isuf/index.pdf">here is the <code class="docutils literal notranslate"><span class="pre">PDF</span></code> file</a> (24Mb).</p>
</div>

    <p class="ablog-post-expand"><a href="post13_isuf.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post12_gsoc.html"
        >Google Summer of Code</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          04 June 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>Members of the Urban Grammar project are getting involved in developing the next
generation set of tools for distributing processing of geospatial vector data. In its
<a class="reference external" href="https://urbangrammarai.xyz/data_processing/index">first</a>
<a class="reference external" href="https://urbangrammarai.xyz/spatial_signatures/index">part</a>, the Urban Grammar
project heavily depends on the processing of vector geospatial data using
<a class="reference external" href="https://geopandas.org">GeoPandas</a> Python library. However, to scale GeoPandas
algorithms to the extent of Great Britain, we need to do more than the library can do by
default. GeoPandas operations are currently all single-threaded, severely limiting the
scalability of its usage and leaving most of the CPU cores just laying around, doing
nothing. <a class="reference external" href="https://dask.org/">Dask</a> is a library that brings parallel and distributed
computing to the ecosystem. For example, it provides a Dask DataFrame that consists of
partitioned pandas DataFrames. Each partition can be processed by a different process
enabling the computation to be done in parallel or even out-of-core.</p>
<p>We are using Dask within our workflows in bespoke scripts. However, Dask could provide
ways to scale geospatial operations in GeoPandas in a similar way it does with pandas.
There has been some effort to build a bridge between Dask and GeoPandas, currently
taking the shape of the <a class="reference external" href="https://github.com/geopandas/dask-geopandas">dask-geopandas</a>
library. While that already supports basic parallelisation, which we used in our code,
some critical components are not ready yet. That should change during this summer within
the Google Summer of Code project Martin is (co-)mentoring. We hope that this effort
will allow us to significantly simplify and even speed up the custom machinery we built
to create spatial signatures in
<a class="reference external" href="https://urbangrammarai.xyz/spatial_signatures/index">WP2</a>.</p>
</div>

    <p class="ablog-post-expand"><a href="post12_gsoc.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post11_second_advisory_board.html"
        >Second Advisory Board</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          29 April 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>On April 15th. 2021, we held the second meeting of the Advisory Board for the project. We are delighted that all <a class="reference external" href="https://urbangrammarai.github.io/blog/post3.html">board members</a> joined us on Zoom for a few hours of exciting discussions on the progress and the future of the project.</p>
<p>Dani started with an overview of our progress since the last meeting, which you can check in his <a class="reference external" href="https://urbangrammarai.github.io/blog/post8_ubdc.html">UBDC talk</a>. We followed by the focused discussion on the concepts of Spatial Signature and Enclosed Tessellation and our initial paper illustrating both on the sample of cities worldwide. We discussed the clarity of our ideas and the needs for new spatial units and classification methods, and their potential drawbacks and enhancements. In the last part, we tried to zoom out to see a bigger picture and fit the research within existing projects within academia and the public sector.</p>
<p>After three hours of a very fruitful discussion, we finished with a lot of food for thought and ideas to be explored in the future. Letâ€™s just hope that the Advisory Board meetings will soon happen physically in Liverpool to have an even more productive and friendly environment!</p>
</div>

    <p class="ablog-post-expand"><a href="post11_second_advisory_board.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post10_clustergram.html"
        >Clustergam: visualisation of cluster analysis</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          27 April 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>In this post, we introduce a new Python package to generate clustergrams from clustering solutions. The library has been developed as part of the Urban Grammar project, and it is compatible with <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> and GPU-enabled libraries such as <code class="docutils literal notranslate"><span class="pre">cuML</span></code> or <code class="docutils literal notranslate"><span class="pre">cuDF</span></code> within <code class="docutils literal notranslate"><span class="pre">RAPIDS.AI</span></code>.</p>
<p>When we want to do some cluster analysis to identify groups in our data, we often use algorithms like K-Means, which require the specification of a number of clusters. But the issue is that we usually donâ€™t know how many clusters there are.</p>
<p>There are many methods on how to determine the correct number, like silhouettes or elbow plot, to name a few. But they usually donâ€™t give much insight into what is happening between different options, so the numbers are a bit abstract.</p>
<p><a class="reference external" href="http://www.schonlau.net/clustergram.html">Matthias Schonlau</a> proposed another approach - a clustergram. Clustergram is a two-dimensional plot capturing the flows of observations between classes as you add more clusters. It tells you how your data reshuffles and how good your splits are. <a class="reference external" href="https://www.r-statistics.com/2010/06/clustergram-visualization-and-diagnostics-for-cluster-analysis-r-code/">Tal Galili</a> later implemented clustergram for K-Means in R. And I have used Talâ€™s
implementation, ported it to Python and created <code class="docutils literal notranslate"><span class="pre">clustergram</span></code> - a Python package to make clustergrams.</p>
<p><code class="docutils literal notranslate"><span class="pre">clustergram</span></code> currently supports K-Means and using <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> (inlcuding Mini-Batch implementation) and RAPIDS.AI <code class="docutils literal notranslate"><span class="pre">cuML</span></code> (if you have a CUDA-enabled GPU), Gaussian Mixture Model (<code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> only) and hierarchical clustering based on <code class="docutils literal notranslate"><span class="pre">scipy.hierarchy</span></code>. Alternatively, we can create clustergram based on labels and data derived from alternative custom clustering algorithms. It provides a sklearn-like API and plots clustergram using matplotlib, which gives it a wide range of styling
options to match your publication style.</p>
</div>

    <p class="ablog-post-expand"><a href="post10_clustergram.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post9_sad.html"
        >Spatial Signatures at the Spatial Analytics + Data Seminar Series</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          26 April 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>On March 30th, Martin presented the current progress in the development
of Spatial Signatures at the Spatial Analytics + Data Seminar Series
organised by the University of Newcastle, the University of Bristol and
the Alan Turing Institute. Martin presented the basics of urban morphometrics,
showing examples of relevant research based on the <code class="docutils literal notranslate"><span class="pre">momepy</span></code> Python package to
provide a background for the second part of the talk focusing on Spatial
Signatures. The research was well received and initiated a great discussion,
which we hope will continue on some other platforms soon.</p>
<p>The recording is available on Youtube:</p>
<p>The slides used are <a class="reference external" href="https://urbangrammarai.github.io/talks/202103_sad/">here</a> or, if you prefer it, <a class="reference external" href="https://urbangrammarai.github.io/talks/202103_sad/index.pdf">here is the <code class="docutils literal notranslate"><span class="pre">PDF</span></code> file</a> (27Mb).</p>
</div>

    <p class="ablog-post-expand"><a href="post9_sad.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post8_ubdc.html"
        >Spatial Signatures at UBDC</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          08 April 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>On March 16th, Dani presented ongoing work on the development of Spatial
Signatures at the University of Glasgowâ€™s Urban Big Data Centre webinar
series. This was the first time we took the project on tour and it was very
well received. With an audience that peaked at about 75 folks and many great
questions that extended the session well over one hour, we are super happy
with how the foundational ideas of the project were received.</p>
<p>The link to the webinar, for posterity, is <a class="reference external" href="http://ubdc.ac.uk/education-and-events/events-and-courses/past-events-2021/spatial-signatures-research-webinar/">here</a> and
you can have a look at an edited version of the video at:</p>
<p>The slides used are <a class="reference external" href="https://urbangrammarai.github.io/talks/202103_ubdc">here</a> or, if you prefer it, <a class="reference external" href="https://urbangrammarai.github.io/talks/202103_ubdc/index.pdf">here is the <code class="docutils literal notranslate"><span class="pre">PDF</span></code> file</a> (15Mb).</p>
</div>

    <p class="ablog-post-expand"><a href="post8_ubdc.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post7_graphics.html"
        >Visual style and a graphics package</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          17 February 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>Any work of the size of our Urban Grammar AI project has many outputs. All of them should ideally share the same design language, so once we combine them, they tell a coherent story. Therefore, we have defined a visual style applied to any graphical output we will produce.</p>
<p>We have started with a basic colourmap. A significant part of our work will result in categorical maps, so we need diverse colours. We have looked back at the excellent cartography our predecessors produced and found a gem. A study of wage and nationality in Chicago by Jane Addams and Florence Kelley from 1895 resulted in a series of beautiful maps like this one:</p>
<p><em>Hull House Maps and Papers (1895) by Jane Addams and Florence Kelley.</em></p>
<p>We based our primary colours on the six colours you can see on this map. This colour map offers a variety while retaining readability, colours nicely play with each other and, importantly, are colour blind safe.</p>
<p><em>Primary colours derived from Adams and Kelly.</em></p>
</div>

    <p class="ablog-post-expand"><a href="post7_graphics.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
  

  <div class="section ablog-post">
    <h2 class="ablog-post-title">
      <a href="post6_tobler.html"
        >Contribution to tobler: Speeding up areal interpolation</a
      >
    </h2>

    <ul class="ablog-archive">
      <li>
          16 February 2021 
      </li>
            
    </ul>
    <div class="ablog-post-excerpt docutils container">
<p>Have you ever needed to link two sources of data, each attached to a different geometry? In our work in the <a class="reference external" href="https://urbangrammarai.github.io/spatial_signatures/index">WP2</a>, we do. We have to transfer data from various sources, linked to output areas, urban blocks or other spatial units to our own bespoke set of geographies. Therefore, we often need to do areal interpolation to correctly map data from one layer to another. Luckily, the open-source Python ecosystem can help.</p>
<p><a class="reference external" href="https://pysal.org/tobler/">Tobler</a>, a part of <a class="reference external" href="https://pysal.org">PySAL family</a>, is a library for areal interpolation and dasymetric mapping which already offered what we needed. However, our data tends to be large, up to 15 million rows on which we need to interpolate several hundreds of thousands of rows of input data. That can take a while, so each performance improvement can help a lot.</p>
<p>We have looked into the existing code of <code class="docutils literal notranslate"><span class="pre">tobler</span></code> and contributed to the refactoring if its <code class="docutils literal notranslate"><span class="pre">area_interpolate</span></code> function. The original implementation was using custom code for spatial indexing, which was replaced by a performant vectorised implementation based on the more recent <a class="reference external" href="https://pygeos.readthedocs.io/en/latest/"><code class="docutils literal notranslate"><span class="pre">pygeos</span></code></a> project.</p>
<p>With sample data, weâ€™ve been able to speed up the interpolation from 2.4 seconds to less than 400 milliseconds, having the same result 6x faster.</p>
<p>Such an improvement is great, but it still uses only a single core (as most of the geospatial code to be honest), leaving the rest in a modern computer (four or more cores is not uncommon these daysâ€¦) lazily laying around. We have tried to change this and contributed a (still experimental) parallel implementation of the same algorithm (based on <a class="reference external" href="https://joblib.readthedocs.io/en/latest/"><code class="docutils literal notranslate"><span class="pre">joblib</span></code></a>).</p>
</div>

    <p class="ablog-post-expand"><a href="post6_tobler.html"><em>Read more ...</em></a></p>
    <hr />
  </div>
   
</div>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2020-, Dani Arribas-Bel, Martin Fleischmann.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>