
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>xyzservices: a unified source of XYZ tile providers in Python &#8212; Urban Grammar AI  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
     
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Urban Grammar AI Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    


    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><center>
  <a class="navbar-brand" href="../index.html">
    <img src="../_static/logo.svg" alt="logo">
  </a>
  <p style="font-size:1.3em">Urban Grammar AI</p>
  <p style="font-size:1em">research project</p>
</center>


<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..."
    aria-label="Search the docs ..." autocomplete="off">
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
    



    <ul class="nav bd-sidenav">
      
      <li class="nav-item ">
        <a class="nav-link" href="../overview.html">Project overview</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.github.io/blog/archive">Updates</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.github.io/talks/">Public talks</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.github.io/data_processing/index">WP1 - Data processing</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://urbangrammarai.github.io/spatial_signatures/index">WP2 - Spatial Signatures</a>
      </li>
      
    </ul>

</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-situation">
   The situation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contextily">
     contextily
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#folium">
     folium
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ipyleaflet">
     ipyleaflet
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#holoviews">
     holoviews
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-vision">
   The vision
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                 <div class="tex2jax_ignore mathjax_ignore section" id="xyzservices-a-unified-source-of-xyz-tile-providers-in-python">
<h1>xyzservices: a unified source of XYZ tile providers in Python<a class="headerlink" href="#xyzservices-a-unified-source-of-xyz-tile-providers-in-python" title="Permalink to this headline">¶</a></h1>
<p><em>Within the project, we often need to map the results within different contexts ranging from static to interactive maps. We felt that it could be a smoother experience and built <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code>.</em></p>
<p>A Python ecosystem offers numerous tools for the visualisation of data
on a map. A lot of them depend on XYZ tiles, providing a base map layer,
either from OpenStreetMap, satellite or other sources. The issue is that
each package that offers XYZ support manages its own list of supported
providers.</p>
<p>We have built <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code> package to support any Python library making
use of XYZ tiles. I’ll try to explain the rationale why we did that,
without going into the details of the package. If you want those
details, check its <a class="reference external" href="https://xyzservices.readthedocs.io/en/latest/">documentation</a>.</p>
<div class="section" id="the-situation">
<h2>The situation<a class="headerlink" href="#the-situation" title="Permalink to this headline">¶</a></h2>
<p>Let me quickly look at a few popular packages and their approach to tile
management - <code class="docutils literal notranslate"><span class="pre">contextily</span></code>, <code class="docutils literal notranslate"><span class="pre">folium</span></code>, <code class="docutils literal notranslate"><span class="pre">ipyleaflet</span></code> and <code class="docutils literal notranslate"><span class="pre">holoviews</span></code>.</p>
<div class="section" id="contextily">
<h3>contextily<a class="headerlink" href="#contextily" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">contextily</span></code> brings contextual base maps to static <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> plots. It
comes with a dedicated <code class="docutils literal notranslate"><span class="pre">contextily.providers</span></code> module, which contains <a class="reference external" href="https://github.com/geopandas/contextily/blob/v1.1.0/contextily/_providers.py">a
hard-coded list of providers</a> scraped from <a class="reference external" href="http://leaflet-extras.github.io/leaflet-providers/preview/">the list used by leaflet</a>
(as of version 1.1.0).</p>
</div>
<div class="section" id="folium">
<h3>folium<a class="headerlink" href="#folium" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">folium</span></code> is a lightweight interface to a JavaScript leaflet library. It
providers built-in support for 6 types of tiles and allows passing any
XYZ URL and its attribution to a map. It means that it mostly relies on
external sources of tile providers.</p>
</div>
<div class="section" id="ipyleaflet">
<h3>ipyleaflet<a class="headerlink" href="#ipyleaflet" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ipyleaflet</span></code> brings leaflet support to Jupyter notebooks and comes with
a bit more options than <code class="docutils literal notranslate"><span class="pre">folium</span></code>. It has a very similar approach as
<code class="docutils literal notranslate"><span class="pre">contextily</span></code> does - it has <a class="reference external" href="https://github.com/jupyter-widgets/ipyleaflet/blob/0.14.0/ipyleaflet/basemaps.py">a hard-coded list</a> of about 37 providers in
its <code class="docutils literal notranslate"><span class="pre">basemaps</span></code> module.</p>
</div>
<div class="section" id="holoviews">
<h3>holoviews<a class="headerlink" href="#holoviews" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">holoviews</span></code> provides a Python interface to the Bokeh library and its
list of supported base maps is also <a class="reference external" href="https://github.com/holoviz/holoviews/blob/v1.14.5/holoviews/element/tiles.py">hard-coded</a>.</p>
<p>A similar situation is in other packages like <code class="docutils literal notranslate"><span class="pre">geemap</span></code> or <code class="docutils literal notranslate"><span class="pre">leafmap</span></code>.</p>
<p>Each package has to maintain the list of base maps, ensure that they all
work, respond to users requiring more, update links… That is a lot of
duplicated maintenance burden. We think it is avoidable.</p>
</div>
</div>
<div class="section" id="the-vision">
<h2>The vision<a class="headerlink" href="#the-vision" title="Permalink to this headline">¶</a></h2>
<p>All XYZ tile providers have a single lightweight home and a clean API
supporting the rest of the ecosystem. All the other packages use the
same resource, one which is tested and expanded by a single group of
maintainers.</p>
<p>We have designed <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code> to be exactly that. It is a Python
package that has no dependencies and only a single purpose - to collect
and process metadata of tile providers.</p>
<p>We envisage a few potential use cases.</p>
<p>The first - packages like <code class="docutils literal notranslate"><span class="pre">contextily</span></code> and <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> will directly
support <code class="docutils literal notranslate"><span class="pre">xyzservices.TileProvider</span></code> object when specifying tiles. Nothing
else is needed, <code class="docutils literal notranslate"><span class="pre">contextily</span></code> will fetch the data it needs (final tile
URL, an attribution, zoom and extent limits) from the object. In the
code form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import xyzservices.providers as xyz
from contextily import add_basemap

add_basemap(ax, source=xyz.CartoDB.Positron)
</pre></div>
</div>
<p>The second option is wrapping <code class="docutils literal notranslate"><span class="pre">xyzservices.providers</span></code> into a custom API
providing, for example, an interactive selection of tiles.</p>
<p>The third one is using different parts of a <code class="docutils literal notranslate"><span class="pre">TileProvider</span></code> individually
when passing the information. This option can be currently used, for
example, with <code class="docutils literal notranslate"><span class="pre">folium</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import folium
import xyzservices.providers as xyz

tiles = xyz.CartoDB.Positron

folium.Map(
    location=[53.4108, -2.9358],
    tiles=tiles.build_url(),
    attr=tiles.attribution,
)
</pre></div>
</div>
<p>The last one is the most versatile. The <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code> comes with a JSON
file used as a storage of all the metadata. The JSON is automatically
installed to <code class="docutils literal notranslate"><span class="pre">share/xyzservices/providers.json</span></code> where it is available
for any other package without depending on <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code> directly.</p>
<p>We hope to cooperate with maintainers of other existing packages and
move most of the functionality around XYZ tiles that can be reused to
<code class="docutils literal notranslate"><span class="pre">xyzservices</span></code>. We think that it will:</p>
<ol class="simple">
<li><p>Remove the burden from individual developers. Any package will just
implement an interface to Python or JSON API of <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code>.</p></li>
<li><p>Expand the list easy-to-use tiles for users. <code class="docutils literal notranslate"><span class="pre">xyzservices</span></code> currently
has over 200 providers, all of which should be available for users
across the ecosystem, without the need to individually hard-code
them in every package.</p></li>
</ol>
<p>While this <a class="reference external" href="https://github.com/geopandas/contextily/issues/153">discussion started in May 2020</a> (thanks <a class="reference external" href="https://github.com/darribas">&#64;darribas</a>!), the
initial version of the package is out now and installable from PyPI and
conda-forge. We hope to have as many developers as possible on board to
allow for the consolidation of the ecosystem in the future.</p>
</div>
</div>

<div class="section">
     
<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="post14_ati.html">
       Signatures for (all of) GB at Turing Urban Analytics
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
    
  </span>
</div>
  
</div>

              </div>
              
              
              <div class='prev-next-bottom'>
                

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2020-, Dani Arribas-Bel, Martin Fleischmann.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>